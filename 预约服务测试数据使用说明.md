# é¢„çº¦æœåŠ¡æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ä½¿ç”¨è¯´æ˜

## ğŸ“ æ¦‚è¿°

`AppointmentTestDataGenerator` æ˜¯ä¸“ä¸ºé¢„çº¦æœåŠ¡æ¨¡å—è®¾è®¡çš„æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ï¼Œèƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆå®Œæ•´çš„æµ‹è¯•æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€æœåŠ¡ç±»å‹ã€æœåŠ¡äººå‘˜å’Œé¢„çº¦è®¢å•ç­‰ã€‚

## ğŸ—ƒï¸ æ•°æ®åº“è¡¨ç»“æ„

åŸºäºä»¥ä¸‹å®ä½“ç±»ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼š

### 1. ç”¨æˆ·è¡¨ (users)
```sql
-- ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨
- id: ç”¨æˆ·ID (è‡ªå¢ä¸»é”®)
- username: ç”¨æˆ·å (ç™»å½•ç”¨)
- password: åŠ å¯†å¯†ç 
- phone: æ‰‹æœºå·
- nickname: æ˜µç§°
- gender: æ€§åˆ« (0-æœªçŸ¥ 1-ç”· 2-å¥³)
- status: çŠ¶æ€ (0-ç¦ç”¨ 1-æ­£å¸¸ 2-æœªæ¿€æ´»)
- register_time: æ³¨å†Œæ—¶é—´
```

### 2. æœåŠ¡ç±»å‹è¡¨ (appointment_services)
```sql
-- é¢„çº¦æœåŠ¡ç±»å‹è¡¨
- id: æœåŠ¡ID (è‡ªå¢ä¸»é”®)
- service_type: æœåŠ¡ç±»å‹æ ‡è¯† (cleaning/repair/movingç­‰)
- service_name: æœåŠ¡åç§°
- description: æœåŠ¡æè¿°
- icon: æœåŠ¡å›¾æ ‡
- base_price: åŸºç¡€ä»·æ ¼
- unit: è®¡ä»·å•ä½
- is_hot: æ˜¯å¦çƒ­é—¨æœåŠ¡ (0-å¦ 1-æ˜¯)
- sort_order: æ’åºæƒé‡
- status: çŠ¶æ€ (0-ç¦ç”¨ 1-å¯ç”¨)
```

### 3. æœåŠ¡äººå‘˜è¡¨ (appointment_workers)
```sql
-- é¢„çº¦æœåŠ¡äººå‘˜è¡¨
- id: æœåŠ¡äººå‘˜ID (è‡ªå¢ä¸»é”®)
- worker_name: æœåŠ¡äººå‘˜å§“å
- worker_phone: è”ç³»ç”µè¯
- gender: æ€§åˆ« (0-æœªçŸ¥ 1-ç”· 2-å¥³)
- age: å¹´é¾„
- experience_years: å·¥ä½œç»éªŒå¹´æ•°
- service_types: æœåŠ¡ç±»å‹ (å¤šä¸ªç”¨é€—å·åˆ†éš”)
- skill_description: æŠ€èƒ½æè¿°
- rating: è¯„åˆ† (1-5åˆ†)
- order_count: æ¥å•æ•°é‡
- status: çŠ¶æ€ (0-ç¦»èŒ 1-åœ¨èŒ 2-ä¼‘å‡)
```

### 4. é¢„çº¦è®¢å•è¡¨ (appointment_orders)
```sql
-- é¢„çº¦è®¢å•è¡¨
- id: é¢„çº¦è®¢å•ID (è‡ªå¢ä¸»é”®)
- order_no: è®¢å•ç¼–å·
- user_id: ç”¨æˆ·ID
- service_id: æœåŠ¡ID
- service_type: æœåŠ¡ç±»å‹
- service_name: æœåŠ¡åç§°
- worker_id: æœåŠ¡äººå‘˜ID
- worker_name: æœåŠ¡äººå‘˜å§“å
- appointment_time: é¢„çº¦æœåŠ¡æ—¶é—´
- address: æœåŠ¡åœ°å€
- contact_name: è”ç³»äººå§“å
- contact_phone: è”ç³»ç”µè¯
- estimated_price: é¢„ä¼°ä»·æ ¼
- actual_price: å®é™…ä»·æ ¼
- status: è®¢å•çŠ¶æ€ (0-å¾…ç¡®è®¤ 1-å·²ç¡®è®¤ 2-æœåŠ¡ä¸­ 3-å·²å®Œæˆ 4-å·²å–æ¶ˆ)
- rating: ç”¨æˆ·è¯„åˆ† (1-5åˆ†)
- comment: ç”¨æˆ·è¯„ä»·
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: ç”Ÿæˆæ‰€æœ‰æµ‹è¯•æ•°æ®
```java
@Test
public void generateAllTestData()
```
**åŠŸèƒ½**: ä¸€é”®ç”Ÿæˆæ‰€æœ‰æ¨¡å—çš„æµ‹è¯•æ•°æ®
**ç”Ÿæˆå†…å®¹**:
- 10ä¸ªæµ‹è¯•ç”¨æˆ·
- 10ç§æœåŠ¡ç±»å‹
- 20ä¸ªæœåŠ¡äººå‘˜  
- 50ä¸ªé¢„çº¦è®¢å•

### æ–¹æ³•2: åˆ†æ¨¡å—ç”Ÿæˆ

#### ç”Ÿæˆæµ‹è¯•ç”¨æˆ·
```java
@Test
public void generateTestUsers()
```
**ç”Ÿæˆæ•°æ®**:
- ç”¨æˆ·å: test_user01~05, zhang_san, li_siç­‰
- æ˜µç§°: å°æ˜, å°çº¢, é˜³å…‰å°‘å¹´ç­‰
- æ‰‹æœºå·: 138****8888 æ ¼å¼
- éšæœºæ€§åˆ«å’Œè®¤è¯çŠ¶æ€

#### ç”ŸæˆæœåŠ¡ç±»å‹
```java
@Test  
public void generateServiceTypes()
```
**ç”Ÿæˆæ•°æ®**:
- å®¶æ”¿ä¿æ´ (cleaning) - çƒ­é—¨æœåŠ¡
- ç»´ä¿®æœåŠ¡ (repair) - çƒ­é—¨æœåŠ¡
- å®¶ç”µç»´ä¿® (appliance)
- æ¬å®¶æœåŠ¡ (moving) - çƒ­é—¨æœåŠ¡
- å›­è‰ºæœåŠ¡ (gardening)
- é™¤è™«æœåŠ¡ (pest)
- å®¶æ•™æœåŠ¡ (tutoring) - çƒ­é—¨æœåŠ¡
- å…»è€æŠ¤ç† (eldercare)
- è‚²å„¿æœåŠ¡ (childcare) - çƒ­é—¨æœåŠ¡
- å¨å¸ˆæœåŠ¡ (cooking)

#### ç”ŸæˆæœåŠ¡äººå‘˜
```java
@Test
public void generateServiceWorkers()
```
**ç”Ÿæˆæ•°æ®**:
- æŒ‰æœåŠ¡ç±»å‹åˆ†é…ä¸“ä¸šäººå‘˜
- çœŸå®çš„å§“åå’Œè”ç³»æ–¹å¼
- è¯¦ç»†çš„æŠ€èƒ½æè¿°
- åˆç†çš„è¯„åˆ†å’Œæ¥å•æ•°é‡
- åŒ¹é…çš„å·¥ä½œç»éªŒ

#### ç”Ÿæˆé¢„çº¦è®¢å•
```java
@Test
public void generateAppointmentOrders()
```
**ç”Ÿæˆæ•°æ®**:
- 50ä¸ªé¢„çº¦è®¢å•
- éšæœºåˆ†é…ç”¨æˆ·ã€æœåŠ¡å’ŒæœåŠ¡äººå‘˜
- æœªæ¥7-30å¤©çš„é¢„çº¦æ—¶é—´
- å¤šç§è®¢å•çŠ¶æ€åˆ†å¸ƒ
- çœŸå®çš„åœ°å€å’Œè”ç³»ä¿¡æ¯
- åˆç†çš„ä»·æ ¼èŒƒå›´

### æ–¹æ³•3: æ¸…ç†æµ‹è¯•æ•°æ®
```java
@Test
public void clearAllTestData()
```
**åŠŸèƒ½**: æ¸…ç†æ‰€æœ‰æµ‹è¯•æ•°æ®ï¼Œæ¢å¤ç©ºè¡¨çŠ¶æ€

## ğŸ“Š ç”Ÿæˆçš„æµ‹è¯•æ•°æ®è¯¦æƒ…

### ğŸ§‘â€ğŸ¤â€ğŸ§‘ æµ‹è¯•ç”¨æˆ· (10ä¸ª)
| ç”¨æˆ·å | æ˜µç§° | æ‰‹æœºå· | æ€§åˆ« |
|--------|------|--------|------|
| test_user01 | å°æ˜ | 138****5678 | éšæœº |
| zhang_san | é˜³å…‰å°‘å¹´ | 139****6789 | éšæœº |
| ... | ... | ... | ... |

### ğŸ› ï¸ æœåŠ¡ç±»å‹ (10ç§)
| æœåŠ¡ç±»å‹ | æœåŠ¡åç§° | åŸºç¡€ä»·æ ¼ | æ˜¯å¦çƒ­é—¨ |
|----------|----------|----------|----------|
| cleaning | å®¶æ”¿ä¿æ´ | Â¥80.00 | âœ… |
| repair | ç»´ä¿®æœåŠ¡ | Â¥50.00 | âœ… |
| moving | æ¬å®¶æœåŠ¡ | Â¥200.00 | âœ… |
| tutoring | å®¶æ•™æœåŠ¡ | Â¥150.00/å°æ—¶ | âœ… |
| ... | ... | ... | ... |

### ğŸ‘· æœåŠ¡äººå‘˜ (20ä¸ª)
| å§“å | æœåŠ¡ç±»å‹ | è¯„åˆ† | æ¥å•æ•° | ç»éªŒå¹´æ•° |
|------|----------|------|--------|----------|
| æé˜¿å§¨ | cleaning | 4.8â­ | 156å• | 8å¹´ |
| åˆ˜å¸ˆå‚… | repair,appliance | 4.9â­ | 285å• | 12å¹´ |
| æ—è€å¸ˆ | tutoring | 4.9â­ | 245å• | 5å¹´ |
| ... | ... | ... | ... | ... |

### ğŸ“‹ é¢„çº¦è®¢å• (50ä¸ª)
| è®¢å•ç¼–å· | æœåŠ¡ç±»å‹ | çŠ¶æ€ | é¢„çº¦æ—¶é—´ | ä»·æ ¼ |
|----------|----------|------|----------|------|
| APT202501220001 | å®¶æ”¿ä¿æ´ | å¾…ç¡®è®¤ | 2025-01-29 09:00 | Â¥75.50 |
| APT202501220002 | ç»´ä¿®æœåŠ¡ | å·²ç¡®è®¤ | 2025-02-05 14:30 | Â¥48.90 |
| ... | ... | ... | ... | ... |

## âš™ï¸ è¿è¡Œæ­¥éª¤

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿æ•°æ®åº“å·²åˆ›å»ºå¹¶è¿è¡Œäº†æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
mysql -u root -p ai_community < src/main/resources/db/init.sql
mysql -u root -p ai_community < src/main/resources/db/appointment_tables.sql
```

### 2. é…ç½®æµ‹è¯•ç¯å¢ƒ
```yaml
# application-test.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ai_community_test
    username: your_username  
    password: your_password
  profiles:
    active: test
```

### 3. è¿è¡Œæµ‹è¯•
```bash
# æ–¹å¼1: ä½¿ç”¨IDEè¿è¡Œæµ‹è¯•æ–¹æ³•
å³é”®ç‚¹å‡» AppointmentTestDataGenerator ç±» -> Run

# æ–¹å¼2: ä½¿ç”¨Mavenå‘½ä»¤
mvn test -Dtest=AppointmentTestDataGenerator#generateAllTestData

# æ–¹å¼3: è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
mvn test -Dtest=AppointmentTestDataGenerator#generateServiceTypes
```

## ğŸ¯ æ•°æ®ç‰¹ç‚¹

### âœ… æ•°æ®å®Œæ•´æ€§
- æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½æœ‰å€¼
- å¤–é”®å…³è”æ­£ç¡®
- æ•°æ®æ ¼å¼ç¬¦åˆä¸šåŠ¡è§„åˆ™

### âœ… æ•°æ®çœŸå®æ€§
- çœŸå®çš„ä¸­æ–‡å§“å
- åˆç†çš„ä»·æ ¼èŒƒå›´
- ç¬¦åˆé€»è¾‘çš„æ—¶é—´åˆ†å¸ƒ
- çœŸå®çš„åœ°å€ä¿¡æ¯

### âœ… æ•°æ®å¤šæ ·æ€§
- å¤šç§æœåŠ¡ç±»å‹è¦†ç›–
- ä¸åŒçŠ¶æ€çš„è®¢å•åˆ†å¸ƒ
- å„ç§è¯„åˆ†å’Œè¯„ä»·å†…å®¹
- ä¸°å¯Œçš„ç”¨æˆ·ç”»åƒ

### âœ… ä¸šåŠ¡é€»è¾‘
- æœåŠ¡äººå‘˜ä¸æœåŠ¡ç±»å‹åŒ¹é…
- è®¢å•çŠ¶æ€é€»è¾‘åˆç†
- ä»·æ ¼æ³¢åŠ¨åœ¨åˆç†èŒƒå›´
- è¯„åˆ†è¯„ä»·ç¬¦åˆå®Œæˆè®¢å•

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ•°æ®é‡
```java
// åœ¨å¯¹åº”æ–¹æ³•ä¸­ä¿®æ”¹å¾ªç¯æ¬¡æ•°
for (int i = 0; i < 50; i++) { // æ”¹ä¸ºéœ€è¦çš„æ•°é‡
    // ç”Ÿæˆè®¢å•é€»è¾‘
}
```

### æ·»åŠ æ–°çš„æœåŠ¡ç±»å‹
```java
Object[][] serviceData = {
    // ç°æœ‰æ•°æ®...
    {"new_service", "æ–°æœåŠ¡åç§°", "æœåŠ¡æè¿°", "icon", new BigDecimal("100.00"), "æ¬¡", 0, 11}
};
```

### è‡ªå®šä¹‰åœ°å€æ± 
```java
String[] addresses = {
    "ä½ çš„è‡ªå®šä¹‰åœ°å€1",
    "ä½ çš„è‡ªå®šä¹‰åœ°å€2",
    // æ›´å¤šåœ°å€...
};
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç¯å¢ƒ**: å»ºè®®åœ¨æµ‹è¯•æ•°æ®åº“ä¸­è¿è¡Œï¼Œé¿å…æ±¡æŸ“ç”Ÿäº§æ•°æ®
2. **æ•°æ®æ¸…ç†**: ä½¿ç”¨ `clearAllTestData()` æ–¹æ³•æ¸…ç†æµ‹è¯•æ•°æ®
3. **ä¾èµ–å…³ç³»**: ç”Ÿæˆè®¢å•å‰ç¡®ä¿å·²æœ‰ç”¨æˆ·ã€æœåŠ¡ç±»å‹å’ŒæœåŠ¡äººå‘˜æ•°æ®
4. **é‡å¤è¿è¡Œ**: ç”¨æˆ·åå”¯ä¸€ï¼Œé‡å¤è¿è¡Œä¼šè·³è¿‡å·²å­˜åœ¨çš„ç”¨æˆ·
5. **æ€§èƒ½è€ƒè™‘**: å¤§é‡æ•°æ®ç”Ÿæˆæ—¶å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´

## ğŸ” éªŒè¯æ•°æ®

ç”Ÿæˆå®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹SQLéªŒè¯æ•°æ®ï¼š

```sql
-- æ£€æŸ¥å„è¡¨æ•°æ®é‡
SELECT 'users' as table_name, COUNT(*) as count FROM users
UNION ALL
SELECT 'appointment_services', COUNT(*) FROM appointment_services  
UNION ALL
SELECT 'appointment_workers', COUNT(*) FROM appointment_workers
UNION ALL  
SELECT 'appointment_orders', COUNT(*) FROM appointment_orders;

-- æ£€æŸ¥è®¢å•çŠ¶æ€åˆ†å¸ƒ
SELECT status, COUNT(*) as count, 
       CASE status 
           WHEN 0 THEN 'å¾…ç¡®è®¤'
           WHEN 1 THEN 'å·²ç¡®è®¤' 
           WHEN 2 THEN 'æœåŠ¡ä¸­'
           WHEN 3 THEN 'å·²å®Œæˆ'
           WHEN 4 THEN 'å·²å–æ¶ˆ'
       END as status_name
FROM appointment_orders 
GROUP BY status;

-- æ£€æŸ¥æœåŠ¡ç±»å‹åˆ†å¸ƒ
SELECT service_type, service_name, COUNT(*) as order_count
FROM appointment_orders 
GROUP BY service_type, service_name
ORDER BY order_count DESC;
```

---

ğŸ‰ **ä½¿ç”¨è¿™ä¸ªæµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿä¸ºé¢„çº¦æœåŠ¡æ¨¡å—ç”Ÿæˆå®Œæ•´ã€çœŸå®ã€å¤šæ ·çš„æµ‹è¯•æ•°æ®ï¼Œä¾¿äºè¿›è¡ŒåŠŸèƒ½æµ‹è¯•å’Œæ¼”ç¤ºï¼**

