# 新闻热点模块实现方案

## 核心技术选型
- 采用**Jsoup**作为网络爬虫工具
- 数据库使用**MySQL**存储新闻数据
- 配合**Redis**缓存热点新闻

## 新闻源分类策略

### 综合性新闻源
1. **国内权威媒体**
   - 人民网（政治要闻）
   - 新华网（时政报道）
2. **商业门户网站**
   - 新浪新闻（综合热点）
   - 网易新闻（社会新闻）
3. **国际媒体**
   - BBC（国际视角）
   - CNN（全球报道）

### 垂直领域新闻源
| 分类 | 代表网站 | 特点 |
|------|----------|------|
| 财经 | 华尔街见闻、财新网 | 实时行情分析 |
| 科技 | 36氪、TechCrunch | 创业公司动态 |
| 体育 | 腾讯体育、虎扑 | 赛事即时报道 |
| 娱乐 | 豆瓣电影、微博 | 影视综艺资讯 |

## 智能爬取调度系统

### 频率控制
- **高频更新类**（财经/科技）
   - 执行间隔：每小时1次
   - 错峰设置：xx:03分执行
- **常规更新类**（国内/国际）
   - 执行间隔：3小时1次
   - 错峰设置：xx:15分执行
- **低频更新类**（体育/娱乐）
   - 每日采集：9:30/14:00/20:00

### 防重复机制
1. **URL查重**
   - 布隆过滤器预判（10万容量）
   - 数据库唯一索引二次校验
2. **内容去重**
   - SimHash算法（64位指纹）
   - 汉明距离阈值：≤3视为重复

## 性能优化对比

### 数据库优化
| 优化点         | 实施前              | 实施后              |
|---------------|---------------------|---------------------|
| 查询方式       | 全表扫描            | 索引查询            |
| 事务处理       | 批量提交            | 单条提交+异常隔离   |
| 字段设计       | TEXT不限长          | VARCHAR(2000)       |

### 性能指标提升
- 平均处理耗时：35s → **8s**（↓77%）
- 数据库负载：峰值QPS 300 → **稳定60**
- 内存消耗：+2MB（布隆过滤器）

## 关键技术实现

### 布隆过滤器判重流程（Guava）
1. **数据加载**
   - 数据库查询url
   - 启动时加载布隆过滤器
2. **判重**
   - 对抓取到的url进行判重


### 相似内容检测流程
1. **文本预处理**
   - 中文分词（正则初步切分）
   - 停用词过滤
2. **特征提取**
   - 词频统计（Top50关键词）
   - MD5生成64位二进制指纹
3. **相似判定**
   - 异或计算汉明距离
   - 动态阈值控制（3-5位）

注：完整实现需配合数据库版本控制机制