# æ•°æ®åˆ†æžåŠŸèƒ½æµ‹è¯•æ•°æ®å¯¼å…¥æŒ‡å—

## é—®é¢˜åŽŸå› 
ä½ ä¹‹å‰é‡åˆ°çš„"Column count doesn't match value count"é”™è¯¯æ˜¯å› ä¸ºï¼š
1. SQL INSERT è¯­å¥ä¸­åˆ—æ•°ä¸Žå€¼æ•°ä¸åŒ¹é…
2. ç¼ºå°‘äº†æ•°æ®åº“è¡¨ä¸­çš„ä¸€äº›å¿…è¦å­—æ®µ
3. å­—æ®µé¡ºåºä¸Žè¡¨ç»“æž„ä¸ä¸€è‡´

## è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤1ï¼šä½¿ç”¨æ­£ç¡®çš„SQLæ–‡ä»¶
è¯·ä½¿ç”¨ `src/main/resources/correct-test-data.sql` æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ï¼š
- âœ… æ­£ç¡®çš„å­—æ®µæ•°é‡å’Œé¡ºåº
- âœ… å®Œæ•´çš„ `appointment_orders` è¡¨æ•°æ®ï¼ˆ21æ¡è®°å½•ï¼‰
- âœ… å®Œæ•´çš„ `repair_orders` è¡¨æ•°æ®ï¼ˆ21æ¡è®°å½•ï¼‰
- âœ… 12æœˆæœ€æ–°æ•°æ® + 6-11æœˆåŽ†å²æ•°æ®

### æ­¥éª¤2ï¼šå¯¼å…¥æ•°æ®
åœ¨ä½ çš„MySQLå®¢æˆ·ç«¯ä¸­æ‰§è¡Œï¼š

```sql
-- 1. é€‰æ‹©æ•°æ®åº“
USE ai_community;

-- 2. æ‰§è¡Œå¯¼å…¥è„šæœ¬
SOURCE src/main/resources/correct-test-data.sql;

-- æˆ–è€…ç›´æŽ¥å¤åˆ¶ç²˜è´´æ–‡ä»¶å†…å®¹å¹¶æ‰§è¡Œ
```

### æ­¥éª¤3ï¼šéªŒè¯æ•°æ®
å¯¼å…¥åŽéªŒè¯æ•°æ®ï¼š

```sql
-- æ£€æŸ¥é¢„çº¦è®¢å•æ•°æ®
SELECT COUNT(*) as total_appointments FROM appointment_orders WHERE id >= 1000;
-- é¢„æœŸç»“æžœï¼š21æ¡è®°å½•

-- æ£€æŸ¥ç»´ä¿®è®¢å•æ•°æ®  
SELECT COUNT(*) as total_repairs FROM repair_orders WHERE id >= 2000;
-- é¢„æœŸç»“æžœï¼š21æ¡è®°å½•

-- æ£€æŸ¥12æœˆæ•°æ®åˆ†å¸ƒ
SELECT 
    service_type, 
    COUNT(*) as count,
    AVG(rating) as avg_rating
FROM appointment_orders 
WHERE create_time >= '2024-12-01' 
GROUP BY service_type;

-- æ£€æŸ¥çŠ¶æ€åˆ†å¸ƒ
SELECT 
    status,
    COUNT(*) as count,
    CASE 
        WHEN status = 0 THEN 'å¾…ç¡®è®¤'
        WHEN status = 1 THEN 'å·²ç¡®è®¤' 
        WHEN status = 2 THEN 'æœåŠ¡ä¸­'
        WHEN status = 3 THEN 'å·²å®Œæˆ'
        WHEN status = 4 THEN 'å·²å–æ¶ˆ'
    END as status_name
FROM appointment_orders 
WHERE id >= 1000
GROUP BY status;
```

## æ•°æ®ç‰¹ç‚¹

### é¢„çº¦è®¢å• (appointment_orders)
- **æ€»æ•°**ï¼š21æ¡ï¼ˆ12æœˆ15æ¡ + åŽ†å²6æ¡ï¼‰
- **æœåŠ¡ç±»åž‹**ï¼šç»´ä¿®æœåŠ¡ã€æ¸…æ´æœåŠ¡ã€å®‰è£…æœåŠ¡
- **çŠ¶æ€åˆ†å¸ƒ**ï¼šå·²å®Œæˆ(60%)ã€å¾…ç¡®è®¤(20%)ã€æœåŠ¡ä¸­(20%)
- **è¯„åˆ†èŒƒå›´**ï¼š3-5æ˜Ÿï¼Œå¹³å‡çº¦4.3åˆ†
- **æ—¶é—´è·¨åº¦**ï¼š2024å¹´6æœˆ-12æœˆ

### ç»´ä¿®è®¢å• (repair_orders)  
- **æ€»æ•°**ï¼š21æ¡ï¼ˆ12æœˆ15æ¡ + åŽ†å²6æ¡ï¼‰
- **ç»´ä¿®ç±»åž‹**ï¼šç”µå™¨ç»´ä¿®ã€æ°´ç®¡ç»´ä¿®ã€é—¨çª—ç»´ä¿®
- **çŠ¶æ€åˆ†å¸ƒ**ï¼šå·²å®Œæˆ(65%)ã€å¾…å—ç†(20%)ã€å¤„ç†ä¸­(15%)
- **æ»¡æ„åº¦**ï¼š3-5æ˜Ÿï¼Œå¹³å‡çº¦4.2åˆ†
- **æ—¶é—´è·¨åº¦**ï¼š2024å¹´6æœˆ-12æœˆ

## æµ‹è¯•éªŒè¯

å¯¼å…¥æˆåŠŸåŽï¼Œè®¿é—®ä»¥ä¸‹APIæµ‹è¯•æ•°æ®åˆ†æžåŠŸèƒ½ï¼š

```bash
# 1. ç»´ä¿®ç±»åž‹åˆ†å¸ƒ
GET /api/analytics/repair-type-distribution?startDate=2024-12-01&endDate=2024-12-31

# 2. æœåŠ¡å“åº”æ—¶é—´
GET /api/analytics/service-response-time?startDate=2024-12-01&endDate=2024-12-31

# 3. ç”¨æˆ·æ´»è·ƒåº¦
GET /api/analytics/user-activity?startDate=2024-12-01&endDate=2024-12-31

# 4. æœåŠ¡å®Œæˆç»Ÿè®¡
GET /api/analytics/service-completion?startDate=2024-12-01&endDate=2024-12-31

# 5. æ»¡æ„åº¦è¯„åˆ†
GET /api/analytics/satisfaction-score?startDate=2024-12-01&endDate=2024-12-31
```

## é¢„æœŸç»“æžœ

å¯¼å…¥æ•°æ®åŽï¼Œä½ çš„æ•°æ®åˆ†æžé¡µé¢åº”è¯¥æ˜¾ç¤ºï¼š
- ðŸ“Š **ç»´ä¿®ç±»åž‹åˆ†å¸ƒå›¾**ï¼šç”µå™¨ç»´ä¿®å æ¯”æœ€é«˜
- â±ï¸ **å¹³å‡å“åº”æ—¶é—´**ï¼šçº¦15-30åˆ†é’Ÿ
- ðŸ‘¥ **æ—¥æ´»è·ƒç”¨æˆ·**ï¼šæ¯æ—¥1-3ä¸ªç”¨æˆ·
- âœ… **æœåŠ¡å®ŒæˆçŽ‡**ï¼šçº¦60-70%
- â­ **å¹³å‡æ»¡æ„åº¦**ï¼š4.2-4.3åˆ†

## æ•…éšœæŽ’é™¤

å¦‚æžœä»ç„¶å‡ºçŽ°é—®é¢˜ï¼š

1. **æ£€æŸ¥è¡¨ç»“æž„**ï¼š
```sql
DESCRIBE appointment_orders;
DESCRIBE repair_orders;
```

2. **é‡å¯åº”ç”¨**ï¼š
å¯¼å…¥æ•°æ®åŽé‡å¯Spring Bootåº”ç”¨ä»¥æ¸…ç†ç¼“å­˜

3. **æ£€æŸ¥æ—¥å¿—**ï¼š
æŸ¥çœ‹åº”ç”¨æ—¥å¿—ä¸­æ˜¯å¦æœ‰SQLå¼‚å¸¸æˆ–MyBatisæ˜ å°„é”™è¯¯

4. **æ¸…ç†é‡è¯•**ï¼š
å¦‚æžœéœ€è¦é‡æ–°å¯¼å…¥ï¼Œå…ˆæ¸…ç†æµ‹è¯•æ•°æ®ï¼š
```sql
DELETE FROM appointment_orders WHERE id >= 1000;
DELETE FROM repair_orders WHERE id >= 2000;
```
